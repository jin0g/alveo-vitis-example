---
description: 
globs: 
alwaysApply: true
---
# ホストプログラムへの .xclbin ファイルの引数渡しに関するルール

## 原則
Vitis および XRT (Xilinx Runtime) を使用したアクセラレータアプリケーションにおいて、ホストプログラム（C++テストベンチなど）に対して、FPGAにロードするカーネルバイナリである `.xclbin` ファイルのパスを、コマンドライン引数として渡すのは一般的な設計パターンの一つです。

## 理由
- **柔軟性**: 実行時に異なる `.xclbin` ファイルを容易に指定できるため、開発やテストの際に便利です。
- **明確性**: ホストプログラムがどのカーネルバイナリを使用するかが実行コマンドから明確になります。

## Makefile での記述例
```makefile
run_test_hw: $(TOP)_test_hw $(TOP).xclbin
    ./$(TOP)_test_hw $(TOP).xclbin
```
この例では、`$(TOP)_test_hw` というホストプログラムの実行時に、`$(TOP).xclbin` ファイルのパスを引数として渡しています。ホストプログラム側では、この引数を受け取り、XRT API を介してFPGAに `.xclbin` をロードします。

## 今後の対応
このパターンを理解し、ホストプログラムと Makefile を設計する際に考慮します。
